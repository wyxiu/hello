<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#box {
				width: 100px;
				height: 100px;
				background: gold;
				left: 100px;
				top: 100px;
				position: absolute;
			}
		</style>
	</head>

	<body>
		<button id="btn">开始</button>
		<div id="box"></div>

		<script src="js/tools.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			//			on($("#btn"), "click", function() {
			//				var start = parseInt(css($("#box"), "left"));
			//				var end = 1000;
			//				sport(start, end, 5000, 30);
			//				//				var speed = 5000; //设置运动时间;
			//				//				var range = end - start;
			//				//				var beginT = Date.now(); //设置开始时间，把时间转为毫秒值;
			//				//				var timer = setInterval(function() {
			//				//					var currTime = Date.now();
			//				//					var t = currTime - beginT;
			//				//					t = t > speed ? speed : t;
			//				//					var curStart = t * range / speed + start;
			//				//
			//				//					$("#box").style.left = curStart + "px";
			//				//					console.log(t + "---" + curStart);
			//				//					if (t >= speed) {
			//				//						clearInterval(timer);
			//				//					}
			//				//
			//				//				}, 60);
			//			});

			function sport(start, end, speed, t2, element, attr) {
				var range = end - start;
				var beginT = Date.now(); //设置开始时间，把时间转为毫秒值;
				var timer = setInterval(function() {
					var currTime = Date.now();
					var t = currTime - beginT;
					t = t > speed ? speed : t;
					var curStart = t * range / speed + start;

					element.css(attr, function(){
						return curStart+"px";
					});

					if (t >= speed) {
						clearInterval(timer);
					}

				}, t2);
			}

			on($("#btn"), "click", function() {
				var start = parseInt(css($("#box"), "left"));
				var end = 1000;
				sport(start, end, 5000, 30, $("#box"), "left");
			});
		</script>
	</body>

</html>